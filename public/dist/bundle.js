var e;window.t=window.t||{i:"1",s:"flashhawk",o:"https://github.com/flashhawk"},window.m=window.innerWidth,window.u=window.innerHeight,window.l={},window.g={},window.h={},window.p={},window.v={},window.C={},window._={},window.L={},window.M={},window.S={},window.P={},window.R={},window.T={},window.H={},window.G={},window.k={},window.A={},window.I={},window.F={},window.W={},window.O={},window.B={},window.D={},window.U={},window.N={},window.j={},window.Y={},window.V={},window.K={},window.Z=0,window.interval=1.8,window.$={},window.X={},window.q={},window.J={},window.ee=0,window.te=0,window.ae={},window.ie={},window.se={},window.oe={},window.ne={},window.re=1,GAME_PLAYING=2,GAME_OVER=3,REPLAY=4,window.me={},window.ue={},window.de=1e-4,window.le={},window.ge={},window.ce={},window.he={},window.we={},window.pe={},window.fe={},window.ve={},window.be={},window.ye={},window.Ce={},window._e={},window.Le={},window.Me={},window.xe=["#00FF00","#FF0000","#0000FF","#FFFF00","#FF00FF","#00FFFF"],window.Se=!1,window.Pe=!1,window.Re=!1,window.Te={},window.He={},window.Ge=30,window.ke={},window.Ae={},window.Ie=!1,window.Fe=!1,window.startTime={},window.endTime={},window.Ee=[],window.We=[],window.Oe=[],window.Be=100,window.De={},window.Ue=!1,window.Ne={},window.je={},window.Ye={},window.Ve=0,window.ze=!1,window.Ke=!1,window.Ze="",window.$e=3,window.Xe=[],window.qe={},window.Je=!1,window.Qe={},window.et={position:{}},window.tt={},window.getStats={},window.at=!1,window.it=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","@","!","&"],window.st={},window.ot=!1,window.nt={},window.rt={},window.ut={},window.dt={},FruitGame.lt={gt:["done","working","stuck","automation","transparency","slowMo","llama","mann","kpi"],ct:[1,2,3,1,1,1,1,1,1],ht:[null,"done","working",null,null,null,null,null,null],wt:[{id:"gameover",src:"assets/gameover.png"},{id:"gametitle",src:"assets/gametitle.png"},{id:"shadow",src:"assets/shadow.png"},{id:"bomb",src:"assets/bomb.png"},{id:"bomblight",src:"assets/bomb-light.png"},{id:"miss",src:"assets/miss.png"},{id:"star",src:"assets/star.png"},{id:"score",src:"assets/score.png"},{id:"hud",src:"assets/hud.png"},{id:"hudPower",src:"assets/hudPower.png"},{id:"hudbad",src:"assets/hudbad.png"},{id:"gamelife-5",src:"assets/5Life.png"},{id:"gamelife-4",src:"assets/4Life.png"},{id:"gamelife-3",src:"assets/3Life.png"},{id:"gamelife-2",src:"assets/2Life.png"},{id:"gamelife-1",src:"assets/1Life.png"},{id:"zinmanImage",src:"assets/zinman.png"},{id:"niceImage",src:"assets/Nice.png"},{id:"wowImage",src:"assets/wow.png"},{id:"boomImage",src:"assets/Boom.png"},{id:"excellentImage",src:"assets/Excellent_.png"},{id:"newgame",src:"assets/newgame-new.png"},{id:"automationPink",src:"assets/OtemationLogoPink.png"},{id:"automationBlue",src:"assets/OtemationLogoBlue.png"},{id:"automationGreen",src:"assets/OtemationLogoGreen.png"},{id:"automationActive",src:"assets/HUD_OtemationActive.png"},{id:"slowMoPink",src:"assets/TimeLineLogoPink.png"},{id:"slowMoBlue",src:"assets/TimeLineLogoBlue.png"},{id:"slowMoGreen",src:"assets/TimeLineLogoGreen.png"},{id:"slowMoActive",src:"assets/HUD_SlowMoActive.png"},{id:"transparencyPink",src:"assets/ZinmanPink.png"},{id:"transparencyBlue",src:"assets/ZinmanBlue.png"},{id:"transparencyGreen",src:"assets/ZinmanGreen.png"},{id:"transparencyActive",src:"assets/HUD_ZinmanActive.png"},{id:"kpiPink",src:"assets/KPIPink.png"},{id:"kpiBlue",src:"assets/KPIBlue.png"},{id:"kpiGreen",src:"assets/KPIGreen.png"},{id:"kpiActive",src:"assets/HUD_KPIActive.png"},{id:"mannPink",src:"assets/MannPink.png"},{id:"mannBlue",src:"assets/MannBlue.png"},{id:"mannGreen",src:"assets/MannGreen.png"},{id:"mannActive",src:"assets/HUD_MannActive.png"},{id:"throwFruit",src:"assets/sound/throw-fruit.ogg"},{id:"automationActivated",src:"assets/sound/AutomationActivated.mp3"},{id:"automationMode",src:"assets/sound/Automation_01.mp3"},{id:"mainTheme",src:"assets/sound/maintheme.wav"},{id:"slowMoTheme",src:"assets/sound/SlowMoTheme_01.mp3"},{id:"kpiTheme",src:"assets/sound/kpiTheme.mpeg"},{id:"slowMoActivated",src:"assets/sound/SlowMoActivate_01.mp3"},{id:"royTheme",src:"assets/sound/RoyTheme2.mp3"},{id:"dueDates",src:"assets/sound/DueDates_02.mp3"},{id:"gameOver1",src:"assets/sound/GameOver_01.mp3"},{id:"gameOver2",src:"assets/sound/GameOver_02.mp3"},{id:"gameOver3",src:"assets/sound/GameOver_03.mp3"},{id:"gameOver4",src:"assets/sound/GameOver_04.mp3"},{id:"gameOver5",src:"assets/sound/GameOver_05.mp3"},{id:"touchMe1",src:"assets/sound/TouchMe_01.mp3"},{id:"touchMe2",src:"assets/sound/TouchMe2_01.mp3"},{id:"touchMe3",src:"assets/sound/TouchMe3_01.mp3"},{id:"kpi1",src:"assets/sound/KPIActive_01.mp3"},{id:"kpi2",src:"assets/sound/KPIActive_02.mp3"},{id:"transparency1",src:"assets/sound/Transparency_01.mp3"},{id:"transparency2",src:"assets/sound/Transparency_02.mp3"},{id:"transparency3",src:"assets/sound/Transparency_03.mp3"},{id:"transparency4",src:"assets/sound/Transparency_04.mp3"},{id:"transparency5",src:"assets/sound/Transparency_05.mp3"},{id:"transparency6",src:"assets/sound/Transparency_06.mp3"},{id:"topTen1",src:"assets/sound/TopTen1_01.mp3"},{id:"topTen2",src:"assets/sound/TopTen2_01.mp3"},{id:"zinman",src:"assets/sound/Zinman_01.mp3"},{id:"excellent",src:"assets/sound/Excellent.mp3"},{id:"wow",src:"assets/sound/WOW.mp3"},{id:"nice",src:"assets/sound/NICE.mp3"},{id:"boom",src:"assets/sound/Boom.mp3"},{id:"bombExplode",src:"assets/sound/bomb-explode.mp3"},{id:"ankYou",src:"assets/sound/ankYou2.m4a"},{id:"?",src:"assets/sound/abc/questionMark.mp3"},{id:"hash",src:"assets/sound/abc/hash.mp3"},{id:"splatter",src:"assets/sound/splatter.ogg"}]},letters.forEach(e=>{FruitGame.lt.wt.push({id:e,src:`assets/sound/abc/${e}.mp3`})});for(let e=0;e<10;e++)FruitGame.lt.wt.push({id:`num${e}`,src:`assets/sound/abc/${e}.mp3`});function t(){assetsManager=new FruitGame.pt,assetsManager.addEventListener("complete",i),assetsManager.start()}function i(){document.getElementById("loading").style.display="none",multiplayer&&(topLeftCanvas=document.getElementById("top-left"),topLeftCanvas.style.display="block",topLeftCanvas.width=gameWidth/2,topLeftCanvas.height=gameHeight,topLeftCanvas.style.width="auto",topLeftContext=topLeftCanvas.getContext("2d"),topLeftContext.globalCompositeOperation="lighter",middleLeftCanvas=document.getElementById("middle-left"),middleLeftCanvas.style.display="block",middleLeftCanvas.width=gameWidth/2,middleLeftCanvas.height=gameHeight,middleLeftCanvas.style.width="auto",middleLeftContext=middleLeftCanvas.getContext("2d"),bottomLeftCanvas=document.getElementById("bottom-left"),bottomLeftCanvas.style.display="block",bottomLeftCanvas.width=gameWidth/2,bottomLeftCanvas.height=gameHeight,bottomLeftCanvas.style.width="auto",bottomLeftContext=bottomLeftCanvas.getContext("2d"),bottomLeftContext.fillStyle="white",bottomLeftContext.textAlign="left",bottomLeftContext.textBaseline="top",topRightCanvas=document.getElementById("top-right"),topRightCanvas.style.display="block",topRightCanvas.width=gameWidth/2,topRightCanvas.height=gameHeight,topRightCanvas.style.width="auto",topRightCanvas.style.right=0,topRightCanvas.style.left="auto",topRightContext=topRightCanvas.getContext("2d"),topRightContext.globalCompositeOperation="lighter",middleRightCanvas=document.getElementById("middle-right"),middleRightCanvas.style.display="block",middleRightCanvas.width=gameWidth/2,middleRightCanvas.height=gameHeight,middleRightCanvas.style.width="auto",middleRightCanvas.style.right=0,middleRightCanvas.style.left="auto",middleRightContext=middleRightCanvas.getContext("2d"),bottomRightCanvas=document.getElementById("bottom-right"),bottomRightCanvas.style.display="block",bottomRightCanvas.width=gameWidth/2,bottomRightCanvas.height=gameHeight,bottomRightCanvas.style.width="auto",bottomRightCanvas.style.right=0,bottomRightCanvas.style.left="auto",bottomRightContext=bottomRightCanvas.getContext("2d"),bottomRightContext.fillStyle="white",bottomRightContext.textAlign="Right",bottomRightContext.textBaseline="top"),topCanvas=document.getElementById("top"),topCanvas.style.display="block",topCanvas.width=gameWidth,topCanvas.height=gameHeight,topContext=topCanvas.getContext("2d"),topContext.globalCompositeOperation="lighter",middleCanvas=document.getElementById("middle"),middleCanvas.style.display="block",middleCanvas.width=gameWidth,middleCanvas.height=gameHeight,middleContext=middleCanvas.getContext("2d"),bottomCanvas=document.getElementById("bottom"),bottomCanvas.style.display="block",bottomCanvas.width=gameWidth,bottomCanvas.height=gameHeight,bottomContext=bottomCanvas.getContext("2d"),bottomContext.fillStyle="white",bottomContext.textAlign="left",bottomContext.textBaseline="top",textCanvas=document.getElementById("text"),textCanvas.style.display="block",textCanvas.width=gameWidth,textCanvas.height=gameHeight,textContext=textCanvas.getContext("2d"),textContext.fillStyle="white",textContext.textAlign="left",textContext.textBaseline="top",scoreCanvas=document.getElementById("score-text"),scoreCanvas.style.display="block",scoreCanvas.width=gameWidth,scoreCanvas.height=gameHeight,scoreContext=scoreCanvas.getContext("2d"),scoreContext.fillStyle="white",scoreContext.textAlign="left",scoreContext.textBaseline="top",particleSystem=new SPP.ft,particleSystem.start(),bladeSystem=new SPP.ft,bladeSystem.start(),fruitSystem=new SPP.ft,fruitSystem.start(),bombSystem=new SPP.ft,bombSystem.start(),gravity=new SPP.vt(.15),void 0!==chrome.oe?storage=chrome.oe.bt:storage=window.localStorage,storage.yt||(storage.yt=0),gameState=GAME_READY,multiplayer?(scoreRight=0,scoreLeft=0,gameLifeLeft=5,ui_gamelifeTextureLeft=assetsManager["Ct"],gameLifeRight=5,ui_gamelifeTextureRight=assetsManager["Ct"]):(score=0,gameLife=5,ui_gamelifeTexture=assetsManager["Ct"]),gameLevel=.1,multiplayer&&(topLeftCanvas.addEventListener("mousemove",v,!1),topLeftCanvas.addEventListener("mouseleave",w,!1),topLeftCanvas.addEventListener("mouseenter",p,!1),topRightCanvas.addEventListener("mousemove",v,!1),topRightCanvas.addEventListener("mouseleave",w,!1),topRightCanvas.addEventListener("mouseenter",p,!1)),topCanvas.addEventListener("mousemove",v,!1),topCanvas.addEventListener("mouseleave",w,!1),topCanvas.addEventListener("mouseenter",p,!1),Webcam.set({width:320,height:240,_t:640,Lt:480,Mt:"png",xt:!1,St:!0,Pt:45}),Webcam.Rt("#camera"),themeMusic=createjs.Ht.Tt("mainTheme"),themeMusic.loop=-1,themeMusic.volume=1,scoresController=new W,scoresController.Gt(scoresController.kt(),null,5),E(),C(),s()}function s(){showStartGameUI()}function o(){gameState=GAME_READY,multiplayer?(scoreLeft=0,gameLifeLeft=5,ui_gamelifeTextureLeft=assetsManager["Ct"],scoreRight=0,gameLifeRight=5,ui_gamelifeTextureRight=assetsManager["Ct"],updateHudLeft=0,updateHudRight=0):(score=0,gameLife=5,ui_gamelifeTexture=assetsManager["Ct"],updateHud=0),clearText(),updateAutomation=0,gameLevel=.1}function n(t){hideStartGameUI(),e&&(e.removeEventListener("dead",M),TweenLite.At(e,.5,{scale:0,alpha:0,It:Back.Ft,Et:()=>{e.Wt=0}})),startTime=(new Date).getTime(),endTime=null,bladeHistory=[],fruitHistory=[],cutHistory=[],powerUpsHistory=[],o(),showScoreUI(),gameState=GAME_PLAYING,setTimeout(()=>{themeMusic.play(),themeMusic.loop=-1,themeMusic.volume=1},1e3),multiplayer&&(document.body.className+=" playing")}function r(){gameState==GAME_PLAYING&&(timer+=SPP.Ot,timer>=interval&&(timer=0,m()))}function m(){for(var e=1+(4*Math.random()>>0),t=0;t<e;t++)multiplayer?u()?(throwBomb(middleLeftContext),throwBomb(middleRightContext)):(throwFruit(middleLeftContext,"left"),throwFruit(middleRightContext,"right")):u()?throwBomb(middleContext):throwFruit(middleContext)}function u(){return 2*Math.random()<gameLevel}function d(){gameLevel+=levelStep,gameLevel>1&&(gameLevel=.1)}function l(e="middle"){if(gameState!=GAME_OVER){slowMo=!0;for(var t=fruitSystem.Bt().length;t-- >0;)fruitSystem.Bt()[t].removeEventListener("dead",missHandler);gameState=GAME_OVER,multiplayer?("left"===e?(gameLifeLeft=0,ui_gamelifeTextureLeft=assetsManager["gamelife-"+gameLifeLeft],ui_gameLifeLeft.Dt=ui_gamelifeTextureLeft):"right"===e&&(gameLifeRight=0,ui_gamelifeTextureRight=assetsManager["gamelife-"+gameLifeRight],ui_gameLifeRight.Dt=ui_gamelifeTextureRight),document.body.className=""):(gameLife=0,ui_gamelifeTexture=assetsManager["gamelife-"+gameLife],ui_gameLife.Dt=ui_gamelifeTexture),score>parseInt(storage.yt)&&(storage.yt=score),setTimeout(()=>{var e=Math.floor(99999*Math.random()+1);c(),themeMusic.stop(),createjs.Ht.stop(),scoresController.Ut.length<5||score>=scoresController.Ut[4].J?currentlyPlaying=createjs.Ht.play("topTen"+(e%2+1)):currentlyPlaying=createjs.Ht.play("gameOver"+(e%5+1))},1e3),showGameoverUI()}}function g(){h()}function c(e=50,t="down"){let a=0;if("down"==t)for(let t=100;t>=0;t-=10)a++,setTimeout(()=>{themeMusic.volume=t/100},e*a);else for(let t=0;t<=100;t+=10)a++,setTimeout(()=>{themeMusic.volume=t/100},e*a)}function h(e){hideGameoverUI()}function w(e){allBlades={},bladeSystems={}}function p(e){allBlades={q:bladeColors[Math.floor(Math.random()*bladeColors.length)]},bladeSystems.q=new SPP.ft,bladeSystems.q.start(),bladeContexes.q=e.target.getContext("2d"),bladeCanvases.q=e.target.canvas}function f(e){const t=e.changedTouches,a={};for(let s=0;s<t.length;s++){var i="touch";t[s].identifier>=bladeReplayIdentifier+autoIdentifier?i="autoreplay":t[s].identifier>=bladeReplayIdentifier?i="replay":t[s].identifier>autoIdentifier&&(i="auto"),bladeSystems[i+t[s].identifier]||(bladeSystems[i+t[s].identifier]=new SPP.ft,bladeSystems[i+t[s].identifier].start(),bladeCanvases[i+t[s].identifier]=e.target,bladeContexes[i+t[s].identifier]=e.target.getContext("2d")),a[i+t[s].identifier]=bladeColors[s],F(e,t[s],i+t[s].identifier)}allBlades=a}function v(e){e.layerX||0==e.layerX?(mouse.x=e.layerX,mouse.y=e.layerY):(e.offsetX||0==e.offsetX)&&(mouse.x=e.offsetX,mouse.y=e.offsetY),buildBladeParticle(mouse.x,mouse.y,"mouse")}function y(e){allBlades=[bladeColors[0]],buildBladeParticle(e.x,e.y,"mouse"),console.log(e)}function C(){(setTimeout(()=>{requestAnimationFrame(C)},slowMo?20:0),realSlowmo)?(document.querySelector(".wrapper .sliding-background").className="sliding-background stretch",ui_hudPower.Dt=assetsManager.Nt,ui_hudPower.position.x=157.5,ui_hudPower.position.y=gameHeight-96.5):document.querySelector(".wrapper .sliding-background").className="sliding-background"+(gameState!==GAME_PLAYING&&gameState!==REPLAY&&gameState!==GAME_OVER?" hidden":"");if(isAutomation||slowMo||transparency||isLlamas||ultraSlice||(ui_hudPower.Dt=assetsManager.jt,ui_hudPower.position.x=150,ui_hudPower.position.y=gameHeight-107),powerUpsHistory.push({time:(new Date).getTime(),Ue:slowMo,Se:isAutomation,Ke:ultraSlice,ze:transparency,at:isLlamas}),multiplayer?(topContext.clearRect(0,0,gameWidth,gameHeight),middleContext.clearRect(0,0,gameWidth,gameHeight),bottomContext.clearRect(0,0,gameWidth,gameHeight),topLeftContext.clearRect(0,0,gameWidth/2,gameHeight),middleLeftContext.clearRect(0,0,gameWidth/2,gameHeight),bottomLeftContext.clearRect(0,0,gameWidth/2,gameHeight),showScoreTextUI(bottomLeftContext,scoreLeft),topRightContext.clearRect(0,0,gameWidth/2,gameHeight),middleRightContext.clearRect(0,0,gameWidth/2,gameHeight),bottomRightContext.clearRect(0,0,gameWidth/2,gameHeight),showScoreTextUI(bottomRightContext,scoreRight),gameState===GAME_PLAYING?(topCanvas.style.display="block",bottomCanvas.style.display="block",middleCanvas.style.display="block",topLeftCanvas.style.display="block",bottomLeftCanvas.style.display="block",middleLeftCanvas.style.display="block",topRightCanvas.style.display="block",bottomRightCanvas.style.display="block",middleRightCanvas.style.display="block"):(topLeftCanvas.style.display="none",bottomLeftCanvas.style.display="none",middleLeftCanvas.style.display="none",topRightCanvas.style.display="none",bottomRightCanvas.style.display="none",middleRightCanvas.style.display="none",topCanvas.style.display="block",bottomCanvas.style.display="block",middleCanvas.style.display="block")):(topContext.clearRect(0,0,gameWidth,gameHeight),middleContext.clearRect(0,0,gameWidth,gameHeight),bottomContext.clearRect(0,0,gameWidth,gameHeight),showScoreTextUI(bottomContext,score)),gameState===GAME_PLAYING&&(clearText(),clearScores()),fruitSystem.Yt(),bombSystem.Yt(),particleSystem.Yt(),transparency?(middleContext.globalAlpha=.3,ui_hudPower.Dt=assetsManager.Vt,ui_hudPower.position.x=157.5,ui_hudPower.position.y=gameHeight-96.5):middleContext.globalAlpha=1,isLlamas&&(ui_hudPower.Dt=assetsManager.zt,ui_hudPower.position.x=157.5,ui_hudPower.position.y=gameHeight-96.5),ultraSlice&&(ui_hudPower.Dt=assetsManager.Kt,ui_hudPower.position.x=157.5,ui_hudPower.position.y=gameHeight-96.5),isAutomation||isAutomationLeft||isAutomationRight){var e=[];isAutomation&&e.push("middle"),isAutomationLeft&&e.push("left"),isAutomationRight&&e.push("right"),e.forEach(e=>{var t="wrapper"+("middle"!==e?"-"+e:""),a=document.getElementsByClassName(t)[0];e in automations?(new Date).getTime()-automations[e]>12e3&&(delete automations[e],"left"===e?isAutomationLeft=!1:"right"===e?isAutomationRight=!1:(isAutomation=!1,themeMusic.paused=!1,c(20,"up")),slowMo=!0,setTimeout(()=>slowMo=!1,5e3),a.className=t):(slowMo=!0,currentlyPlaying.stop(),c(20,"down"),currentlyPlaying=createjs.Ht.play("automationActivated"),automations[e]=(new Date).getTime(),setTimeout(()=>{themeMusic.paused=!0,slowMo=!1,a.className=t+" frenzy",currentlyPlaying.stop(),currentlyPlaying=createjs.Ht.play("automationMode")},2e3))}),Object.keys(automations).length>0?(L(),(new Date).getTime()-automations[key]>9e3?interval=.7:interval=.4):interval=1.8}Object.keys(bladeSystems).forEach(e=>bladeSystems[e].Yt()),Object.keys(allBlades).forEach(e=>buildColorBlade(allBlades[e],bladeWidth,e)),collideTest(),d(),r()}function _(e,t,a){var i=Math.random()*Math.PI*2;return{x:Math.cos(i)*a+a+e,y:Math.sin(i)*a+a+t}}function L(){ui_hudPower.Dt=assetsManager.Zt,ui_hudPower.position.x=157.5,ui_hudPower.position.y=gameHeight-96.5;fruitSystem.Bt().length;var e=fruitSystem.Bt().filter(e=>e.$t>0&&e.Xt.y>1&&(new Date).getTime()-e.qt>350).sort((e,t)=>e.position.y<t.position.y?1:-1),t=[];Object.keys(automations).forEach(a=>e.filter(e=>e.Jt===a).slice(0,2).forEach(e=>t.push(e))),t&&t.forEach(e=>{var t,a=fruitSystem.Bt().filter(e=>e.qt),i=_(e.position.x,e.position.y,e.Qt),s={x:e.position.x>i.x?i.x+1.5*e.Qt:i.x-1.5*e.Qt,y:e.position.y>i.y?i.y+1.5*e.Qt:i.y-1.5*e.Qt};if("left"===e.Jt){if(!isAutomationLeft)return;t=topLeftCanvas}else if("right"===e.Jt){if(!isAutomationRight)return;t=topRightCanvas}else{if(!isAutomation)return;t=topCanvas}var o=new TouchEvent("touchmove",{changedTouches:[new Touch({clientX:i.x,clientY:i.y,identifier:autoIdentifier+a.length+1,target:t})]});t.dispatchEvent(o);o=new TouchEvent("touchmove",{changedTouches:[new Touch({clientX:s.x,clientY:s.y,identifier:autoIdentifier+a.length+1,target:t})]});t.dispatchEvent(o),e.qt=(new Date).getTime()})}async function M(){hideStartGameUI(),ui_startFruit&&(ui_startFruit.removeEventListener("dead",n),TweenLite.At(ui_startFruit,.5,{scale:0,alpha:0,It:Back.Ft,Et:()=>{ui_startFruit.Wt=0}})),o(),showScoreUI(),gameState=REPLAY,S(),k(),x()}async function x(){powerUpsHistory.forEach(e=>{setTimeout(()=>{slowMo=e.Ue,isAutomation=e.Se,ultraSlice=e.Ke,transparency=e.ze},e.time-startTime)})}async function S(){bladeHistory.forEach(e=>{setTimeout(()=>{var t=new TouchEvent("touchmove",{changedTouches:[new Touch({clientX:e.x,clientY:e.y,identifier:-1!==e.key.indexOf("auto")?bladeReplayIdentifier+autoIdentifier:bladeReplayIdentifier,target:topCanvas})]});topCanvas.dispatchEvent(t)},e.time-startTime)})}function P(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function R(){var e=0;for(let t=0;t<bladeHistory.length-1;t++){e+=2.54*P(bladeHistory[t],bladeHistory[t+1])/96}return e}function T(){var e={};return fruitHistory.forEach(t=>{const a=t.Dt.name||"bomb";a in e?e[a]++:e[a]=1}),e}function H(){var e={};return cutHistory.forEach(t=>{const a=t.name||"bomb";a in e?e[a]++:e[a]=1}),e}function G(){return{ea:R(),gt:T(),ta:H(),startTime:startTime,endTime:endTime}}async function k(){fruitHistory.forEach(e=>{setTimeout(()=>{const{aa:t,ia:a,x:i,y:s,Wt:o,Dt:n,Jt:r,sa:m,context:u,oa:d}=e,l=d?bombSystem.na(FruitGame.ra):fruitSystem.na(FruitGame.ra);l.Xt.reset(0,t),l.Xt.rotate(a),l.ma.reset(0,0),l.ua("g",gravity),l.addEventListener("dead",missHandler),d?(l.da=0,l.la=bombUpdate,l.init(i,s,o,n,assetsManager.ga,u)):(l.init(i,s,o,n.w,assetsManager.ga,u,n.next,n.Wt),l.ca=n,l.Jt=r),l.sa=m},e.time-startTime)})}FruitGame.pt=function(){SPP.ha.call(this);var e=this,t=0,a=0,i=["w","l","r"];this.wa={},this.pa=[],this.images={},this.fa={},this.va=new createjs.ba,this.va.ya(createjs.Ht),this.va.Ca(20);this.va.addEventListener("complete",function(){var s=FruitGame.lt.gt,o=FruitGame.lt.ct,n=FruitGame.lt.ht;for(t=0;t<s.length;t++){var r={};for(a=0;a<i.length;a++)r[i[a]]=e.va._a(s[t]+i[a]);r.Wt=o[t],r.next=n[t],r.name=s[t],e.pa.push(r),e.wa[s[t]]=r}var m=FruitGame.lt.wt;for(t=0;t<m.length;t++)e[m[t].id]=e.va._a(m[t].id);e.dispatchEvent(new SPP.Event("complete"))}),this.start=function(){var e=FruitGame.lt.gt;for(t=0;t<e.length;t++)for(a=0;a<i.length;a++)this.va.La({id:e[t]+i[a],src:"assets/fruits/"+e[t]+"-"+i[a]+".png"},!1);this.va.Ma(FruitGame.lt.wt,!1),this.va.load()},this.xa=function(){return isLlamas?this.wa.Sa:this.wa.Pa},this.Ra=function(e){return this.wa[e]}},FruitGame.Ta=function(){function e(e){return e*e}function t(e){return e<0?-1:e>0?1:0}function i(i,s,o,n,r){if(!(n<=0)){var m,u=n,d=n*(r=void 0===r?1:r);if(a=e(d)*e(i[0]-s[0])+e(u)*e(i[1]-s[1]),!(a<=0)&&(b=2*e(d)*(s[0]-i[0])*(i[0]-o[0])+2*e(u)*(s[1]-i[1])*(i[1]-o[1]),o=e(d)*e(i[0]-o[0])+e(u)*e(i[1]-o[1])-e(u)*e(d),m=function(e,t,a){if(0!=e){var i=t*t-4*e*a;return 0==i?[-1*t/(2*e),-1*t/(2*e)]:i>0?[(-1*t+Math.sqrt(i))/(2*e),(-1*t-Math.sqrt(i))/(2*e)]:void 0}}(a,b,o))){var l=[[i[0]+m[0]*(s[0]-i[0]),i[1]+m[0]*(s[1]-i[1])],[i[0]+m[1]*(s[0]-i[0]),i[1]+m[1]*(s[1]-i[1])]];return t(l[0][0]-i[0])*t(l[0][0]-s[0])<=0&&t(l[0][1]-i[1])*t(l[0][1]-s[1])<=0||(l[0]=null),t(l[1][0]-i[0])*t(l[1][0]-s[0])<=0&&t(l[1][1]-i[1])*t(l[1][1]-s[1])<=0||(l[1]=null),l}}}this.Ha=function(e,t,a,s,o){var n=i(e,t,a,s,o);return n&&(n[0]||n[1])}},FruitGame.ra=function(){SPP.Ga.call(this),this.ka=function(e,t,a,i){ultraSlice&&this.ca&&"bomb"!==this.ca.name&&(e.filter="grayscale(100%) invert(72%) sepia(16%) saturate(1274%) hue-rotate(83deg) brightness(93%) contrast(89%)"),e.drawImage(t,a,i,t.width,t.height,.5*-t.width,.5*-t.height,t.width,t.height),e.filter="none"}},FruitGame.ra.prototype=SPP.Aa(SPP.Ga.prototype),FruitGame.ra.prototype.constructor=FruitGame.ra,FruitGame.ra.prototype.update=function(){this.rotation+=this.Ia,this.context.translate(this.position.x-20,this.position.y-20),this.context.scale(this.scale,this.scale),!this.ca||"automation"!==this.ca.name&&"slowMo"!==this.ca.name&&"transparency"!==this.ca.name&&"mann"!==this.ca.name&&"kpi"!==this.ca.name||(updateAutomation+=1/32,Math.floor(updateAutomation)%3==0?this.Dt=assetsManager[this.ca.name+"Blue"]:Math.floor(updateAutomation)%3==1?this.Dt=assetsManager[this.ca.name+"Green"]:Math.floor(updateAutomation)%3==2&&(this.Dt=assetsManager[this.ca.name+"Pink"]),this.scale=.5),this.ka(this.context,this.ga,0,0),this.context.setTransform(1,0,0,1,0,0),this.context.translate(this.position.x,this.position.y),this.context.rotate(this.rotation),this.context.scale(this.scale,this.scale),this.ka(this.context,this.Dt,0,0),this.context.setTransform(1,0,0,1,0,0),(this.position.y>this.sa&&null!=this.sa||this.position.x<=0||this.position.x>gameWidth)&&(this.Wt=0)},FruitGame.ra.prototype.init=function(e,t,a,i,s,o,n=null,r=1,m=!1){SPP.Ga.prototype.init.apply(this,[e,t,a]),this.context=o,this.Dt=i,this.ga=s,this.rotation=0,this.scale=1,this.Qt=i.width>=i.height?.5*i.width:.5*i.height,this.Qt*=this.scale,this.sa=null,this.next=n,this.$t=r,this.Fa=(new Date).getTime(),this.qt=0,this.Ea=m,this.Wa=!1,this.Ia=.1*(1-2*Math.random()),this.Ia<=0?this.Ia=-.1:this.Ia>0&&(this.Ia=.1)},window.onload=t;var A={message:"Game Control",Oa:5,Ba:70,Da:!0,Ua:!0};function I(){var e=new dat.Na;e.add(A,"message"),e.add(A,"moveThreshold",0,10).step(1),e.add(A,"depthThreshold",10,255).step(1).ja(function(e){}),e.add(A,"displayShadow").ja(function(e){var t=document.getElementById("shadow");t.style.display=e?"block":"none"}),e.add(A,"mirror"),e.close()}function F(e,t,a){buildBladeParticle(t.clientX,t.clientY,a),e.preventDefault()}function E(){multiplayer?(topLeftCanvas.addEventListener("touchstart",f,!0),topLeftCanvas.addEventListener("touchmove",f,!0),topLeftCanvas.addEventListener("touchend",f,!0),topLeftCanvas.addEventListener("touchcancel",f,!0),topRightCanvas.addEventListener("touchstart",f,!0),topRightCanvas.addEventListener("touchmove",f,!0),topRightCanvas.addEventListener("touchend",f,!0),topRightCanvas.addEventListener("touchcancel",f,!0),topCanvas.addEventListener("touchstart",f,!0),topCanvas.addEventListener("touchmove",f,!0),topCanvas.addEventListener("touchend",f,!0),topCanvas.addEventListener("touchcancel",f,!0),document.body.addEventListener("keydown",e=>{13===e.keyCode&&(isAutomationLeft=!0)},!0),document.body.addEventListener("keydown",e=>{8===e.keyCode&&(isAutomationRight=!0)},!0)):(topCanvas.addEventListener("touchstart",f,!0),topCanvas.addEventListener("touchmove",f,!0),topCanvas.addEventListener("touchend",f,!0),topCanvas.addEventListener("touchcancel",f,!0),document.body.addEventListener("keydown",e=>{9===e.keyCode&&l()},!0),document.body.addEventListener("keydown",e=>{13===e.keyCode&&gameState!==GAME_OVER&&(isAutomation=!0)},!0),document.body.addEventListener("keydown",e=>{16===e.keyCode&&(slowMo=!slowMo)},!0),document.body.addEventListener("keydown",e=>{8===e.keyCode&&gameState===GAME_PLAYING&&(transparency=!transparency)},!0),document.body.addEventListener("keydown",e=>{27===e.keyCode&&(ultraSlice=!ultraSlice)},!0),gameState,GAME_OVER)}!function(){bladeColor="#00ff00",bladeWidth=10;var e=function(e){gameState!=GAME_OVER&&Object.keys(bladeSystems).forEach(t=>{var a=bladeSystems[t],i=bladeContexes[t],s=(bladeCanvases[t],a.Bt().length),o=e,n=e/(s-1);for(i.beginPath();s-- >1;){i.lineWidth=1==s?1:o;var r=a.Bt()[s],m=a.Bt()[s-1];i.moveTo(r.position.x,r.position.y),i.lineTo(m.position.x,m.position.y),i.stroke(),(o-=n)<=0&&(o=1)}})};buildColorBlade=function(t,a,i){var s=bladeContexes[i];s.strokeStyle=t,e(a),s.strokeStyle="#ffffff",e(.6*a)},buildBladeParticle=function(e,t,a){gameState===GAME_PLAYING&&bladeHistory.push({time:(new Date).getTime(),x:e,y:t,key:a}),bladeSystems[a].na(SPP.Ga).init(e,t,.2)}}(),function(){var e=function(){this.scale-=.03,this.scale<0&&(this.scale=0,this.Wt=0)};bombUpdate=function(){this.da+=1/32,this.Dt=Math.floor(this.da)%2?assetsManager.Ya:assetsManager.Va;var t=particleSystem.na(SPP.za),a=1.414*assetsManager.Va.width*.5-5,i=this.position.x+a*Math.cos(this.rotation-SPP.Za.Ka(135)),s=this.position.y+a*Math.sin(this.rotation-SPP.Za.Ka(135));t.init(i,s,1/0,assetsManager.$a,topContext),t.la=e,t.scale=.8,t.ma.reset(0,0),t.Xt.reset(0,-(1+1*Math.random())),t.Xt.rotate(360*Math.random()),t.ua("g",gravity);t=particleSystem.na(SPP.za),a=1.414*assetsManager.Ya.width*.5-5,i=this.position.x+a*Math.cos(this.rotation-SPP.Za.Ka(135)),s=this.position.y+a*Math.sin(this.rotation-SPP.Za.Ka(135));t.init(i,s,1/0,assetsManager.$a,topContext),t.la=e,t.scale=.8,t.ma.reset(0,0),t.Xt.reset(0,-(1+1*Math.random())),t.Xt.rotate(360*Math.random()),t.ua("g",gravity)};var t=function(){this.scale-=.02,this.scale<0&&(this.scale=0,this.Wt=0)};throwBomb=function(e){Math.floor(999999*Math.random()+1)%10!=0||isAutomation||(themeMusic.volume=.5,currentlyPlaying=createjs.Ht.play("dueDates"),setTimeout(()=>{themeMusic.volume=1},3e3));var t=bombSystem.na(FruitGame.ra),a=-(10+3*Math.random()),i=8-16*Math.random();t.Xt.reset(0,a),t.Xt.rotate(i),t.ma.reset(0,0),t.ua("g",gravity),t.la=bombUpdate;var s=.5*e.canvas.width+300*(1-2*Math.random()),o=gameHeight+assetsManager.Va.height,n=assetsManager.Va;t.init(s,o,1/0,n,assetsManager.ga,e),t.sa=gameHeight+assetsManager.Va.height,t.da=0,fruitHistory.push({x:s,y:o,aa:a,ia:i,Wt:1/0,Dt:n,Jt:t.Jt,sa:t.sa,context:e,time:(new Date).getTime(),oa:!0})},cutBomb=function(e){transparency?cutHistory.push({name:"bombTransparent",time:(new Date).getTime()}):(cutHistory.push({name:"bomb",time:(new Date).getTime()}),function(e){for(var a=0;a<150;a++){var i=particleSystem.na(SPP.za);i.init(e.position.x,e.position.y,1/0,assetsManager.$a,topContext),i.la=t,i.scale=2,i.ma.reset(0,0),i.Xt.reset(0,-(3+7*Math.random())),i.Xt.rotate(360*Math.random()),i.ua("g",gravity)}currentlyPlaying.stop(),themeMusic.volume=.5,currentlyPlaying=createjs.Ht.play("bombExplode")}(e),e.Wt=0,l())}}(),collide=new FruitGame.Ta,collideTest=function(){if(gameState!=GAME_OVER){var e,t,a=fruitSystem.Bt(),i=bombSystem.Bt();Object.keys(bladeSystems).forEach(s=>{for(var o=bladeSystems[s].Bt(),n=o.length;n-- >1;){var r=o[n],m=o[n-1];for(var u in a){e=a[u];var d,l=collide.Ha([r.position.x,r.position.y],[m.position.x,m.position.y],[e.position.x,e.position.y],e.Qt);d=-1!==bladeContexes[s].canvas.id.indexOf("left")?"left":-1!==bladeContexes[s].canvas.id.indexOf("right")?"right":"middle",l&&!e.Wa&&(ultraSlice||(new Date).getTime()-e.Fa>250)&&e.Jt===d&&cutFruit(e)}for(var g in i)t=i[g],r=o[n],m=o[n-1],(l=collide.Ha([r.position.x,r.position.y],[m.position.x,m.position.y],[t.position.x,t.position.y],t.Qt))&&-1===s.indexOf("auto")&&cutBomb(t)}})}},function(){var e=function(e,t=1){var a=(3+3*Math.random())*t,i=particleSystem.na(FruitGame.ra);i.init(e.position.x,e.position.y,1/0,e.ca.r,assetsManager.ga,e.context),i.Xt.reset(a,0),i.ma.reset(0,0),i.sa=gameHeight+e.ca.r.height,i.ua("g",gravity),i.Wa=!0;var s=particleSystem.na(FruitGame.ra);s.init(e.position.x,e.position.y,1/0,e.ca.Xa,assetsManager.ga,e.context),s.Xt.reset(-a,0),s.ma.reset(0,0),s.sa=gameHeight+e.ca.Xa.height,s.ua("g",gravity),i.Wa=!0,1===t&&(i.Xt.rotate(-50*Math.random()),i.rotation=e.rotation,s.Xt.rotate(50*Math.random()),s.rotation=e.rotation),"automation"!=e.ca.name&&"transparency"!=e.ca.name&&"slowMo"!=e.ca.name&&"mann"!=e.ca.name&&"llama"!=e.ca.name&&"kpi"!=e.ca.name||(i.scale=.5,s.scale=.5)},t=function(){this.alpha-=.01,this.alpha<0&&(this.alpha=0,this.Wt=0)};throwFruit=function(e,t="middle"){const a=assetsManager.xa(),i=fruitSystem.na(FruitGame.ra);var s=-(10+6*Math.random()),o=8-2*Math.random();i.Xt.reset(0,s),i.Xt.rotate(o),i.ma.reset(0,0),i.ua("g",gravity),i.addEventListener("dead",missHandler);var n=.5*e.canvas.width+200*(1-2*Math.random()),r=gameHeight+a.w.height,m=a;i.init(n,r,1/0,m.w,assetsManager.ga,e,m.next,m.Wt),i.ca=m,i.Jt=t,i.sa=gameHeight+a.w.height,"llama"===m.name&&(i.scale=.5,i.Xt.reset(0,1.5*s)),fruitHistory.push({x:n,y:r,aa:s,ia:o,Wt:1/0,Dt:m,Jt:i.Jt,sa:i.sa,context:e,time:(new Date).getTime()})},cutFruit=function(t){multiplayer?"left"===t.Jt?scoreLeft++:scoreRight++:"llama"===t.ca.name?score+=10:score++;var a=Math.floor(9999999*Math.random()+1);if(a%15!=0||showingGood||isAutomation||(showGood(t.position.x,t.position.y),showingGood=!0),t.removeEventListener("dead",missHandler),"automation"===t.ca.name&&(isAutomation=!0),"transparency"===t.ca.name&&(themeMusic.volume=.2,currentlyPlaying.stop(),currentlyPlaying=createjs.Ht.play("transparency"+(a%6+1)),setTimeout(()=>{themeMusic.volume=1},2e3),transparency=!0,setTimeout(()=>{transparency=!1},1e4)),"kpi"===t.ca.name){c(30,"down");let e="kpi"+(a%2+1);currentlyPlaying.stop(),currentlyPlaying=createjs.Ht.play(e),setTimeout(()=>{kpiTheme=createjs.Ht.play("kpiTheme"),ultraSlice=!0,setTimeout(()=>{ultraSlice=!1,kpiTheme.stop(),c(50,"up")},1e4)},"kpi1"==e?3e3:4500)}if("slowMo"===t.ca.name&&(slowMo=!0,realSlowmo=!0,c(30,"down"),currentlyPlaying=createjs.Ht.play("slowMoActivated"),setTimeout(()=>{slowMoTheme=createjs.Ht.play("slowMoTheme"),setTimeout(()=>{slowMo=!1,realSlowmo=!1,slowMoTheme.stop(),c(50,"up")},1e4)},2e3)),"mann"===t.ca.name&&(isLlamas=!0,c(30,"down"),royTheme=createjs.Ht.play("royTheme"),setTimeout(()=>{isLlamas=!1,royTheme.stop(),c(50,"up")},1e4)),t.Wt=0,t.Wa=!0,t.next){var i=assetsManager.Ra(t.next),s=fruitSystem.na(FruitGame.ra);s.Xt.reset(t.Xt.x,1.2*t.Xt.y),s.ma.reset(0,0),s.ua("g",gravity),s.addEventListener("dead",missHandler),s.init(t.position.x,t.position.y,1/0,i.w,assetsManager.ga,t.context,i.next,i.Wt),s.ca=i,s.sa=gameHeight+i.w.height,s.Jt=t.Jt,e(t,10)}else e(t);cutHistory.push({name:t.ca.name,time:(new Date).getTime()})},missHandler=function(e){var a,i,s;(e.target.removeEventListener("dead",missHandler),e.target.$t-1==0||transparency)||gameState!=GAME_OVER&&(a=e.target,i=particleSystem.na(SPP.za),(s=a.position.x)<=0&&(s=40),s>gameWidth&&(s=gameWidth-40),i.init(s,gameHeight-assetsManager.qa.height/2,1/0,assetsManager.qa,a.context),i.scale=.5,i.Xt.reset(0,-1),i.ma.reset(.01,.01),i.la=t,"left"===e.target.Jt?(gameLifeLeft-=e.target.$t-1,gameLifeLeft<=0&&l("left"),gameLifeLeft<0&&(gameLifeLeft=0),ui_gamelifeTextureLeft=assetsManager["gamelife-"+gameLifeLeft],ui_gameLifeLeft.Dt=ui_gamelifeTextureLeft):"right"===e.target.Jt?(gameLifeRight-=e.target.$t-1,gameLifeRight<=0&&l("right"),gameLifeRight<0&&(gameLifeRight=0),ui_gamelifeTextureRight=assetsManager["gamelife-"+gameLifeRight],ui_gameLifeRight.Dt=ui_gamelifeTextureRight):(gameLife-=0,gameLife<=0&&l("middle"),gameLife<0&&(gameLife=0),ui_gamelifeTexture=assetsManager["gamelife-"+gameLife],ui_gameLife.Dt=ui_gamelifeTexture))}}(),neonWrite=function(e,t,a,i,s=30){t.font="700 "+s+"px 'Sofia Pro ', sans-serif",t.fillStyle="rgb(255,255,255)",t.fillText(e,a,i),t.lineWidth=1,t.strokeStyle="rgb(255,255,255)",t.fillStyle="white",t.fillText(e,a,i),t.strokeText(e,a,i)},blackWrite=function(e,t,a,i,s=30){t.font=s+"px 'Sofia Pro 900', sans-serif",t.fillStyle="rgb(30,30,30)",t.fillText(e,a,i),t.lineWidth=1,t.strokeStyle="rgb(30,30,30)",t.fillStyle="black",t.fillText(e,a,i),t.strokeText(e,a,i)},typeToScreen=function(e,t,a,i=0,s=30,o=neonWrite,n=textContext){return new Promise(r=>{n.fillStyle="white",n.font=s+"px 'Sofia Pro Bold', sans-serifs";var m,u=0;!function d(){u++,m=e.substr(0,u),clearText(t-30,a-30,s*e.length,s+90),o(m,n,t,a,s),u<=e.length?setTimeout(d,i):r(!0)}()})},clearText=function(e=0,t=0,a=gameWidth,i=gameHeight){textContext.clearRect(e,t,a,i)},clearScores=function(e=0,t=0,a=gameWidth,i=gameHeight){scoreContext.clearRect(e,t,a,i)},flashInput=function(e,t,a,i=150,s=90){var o=textContext.measureText(playerName),n=textContext.measureText(" "),r=o.width+n.width*playerName.length,m=(playerName+"_".repeat(nameLength-playerName.length)).split("").join(" ");clearText(e-30,t-30,textContext.measureText(m).width+90,s+90),neonWrite(m,textContext,e,t,s),typeToScreen(playerName.length>=nameLength?"":a,r+e,t,i,s).then(()=>{if(gameState==GAME_OVER){window.Ja=setTimeout(()=>{flashInput(e,t,a,i,s)},i);var o=textContext.measureText(a);clearText(r+e-5,t-30,o.width+10,s+90)}else clearText(0,0,gameWidth,gameHeight)})},enterName=function(){var e=(playerName+"_".repeat(nameLength-playerName.length)).split("").join(" ");height=gameHeight<880?.6*gameHeight:.5*gameHeight,typeToScreen("ENTER NAME:",gameWidth/2,gameHeight/3,0,80).then(()=>typeToScreen(e,gameWidth/2,height,0,112).then(()=>flashInput(gameWidth/2,height,"_",150,112)))},enterScore=function(){typeToScreen("SCORE:",gameWidth/6,gameHeight/3,0,80),height=gameHeight<880?.6*gameHeight:.5*gameHeight,typeToScreen(score.toString(),gameWidth/6,height,0,112)},enterScores=function(e){e.forEach(function(e,t){typeToScreen(e.username.toString(),.7*gameWidth,.326*gameHeight+.086*t*gameHeight,0,32,blackWrite,scoreContext),typeToScreen(e.J.toString(),.87*gameWidth,.326*gameHeight+.086*t*gameHeight,0,32,blackWrite,scoreContext)})},enterNameDelay=function(e){setTimeout(enterName,1e3*e)},enterScoreDelay=function(e){setTimeout(enterScore,1e3*e)},handleName=function(e){(e.keyCode>=65&&e.keyCode<=90||e.keyCode>=48&&e.keyCode<=58||"?"===e.key)&&playerName.length<nameLength&&(playerName+=e.key.toUpperCase(),currentlyPlaying.stop(),currentlyPlaying=createjs.Ht.play("#"===e.key?"hash":isNaN(e.key)?e.key.toUpperCase():`num${e.key}`)),8===e.keyCode&&(playerName=playerName.slice(0,-1))},function(){var t=function(){this.rotation+=.01};showStartGameUI=function(){gameState=GAME_READY,ui_newGame=particleSystem.na(SPP.za),ui_newGame.init(.318*gameWidth,.618*gameHeight,1/0,assetsManager.Qa,topContext),ui_newGame.scale=5,ui_newGame.alpha=0,ui_newGame.la=t,TweenLite.At(ui_newGame,.8,{scale:.55,alpha:1,It:Back.Ft,Et:scoresController.ei}),bladeHistory.length,ui_startFruit=fruitSystem.na(FruitGame.ra),ui_startFruit.addEventListener("dead",n);var e=assetsManager.Ra("stuck");ui_startFruit.init(.318*gameWidth,.618*gameHeight,1/0,e.w,assetsManager.ga,topContext),ui_startFruit.Ia=-.02,ui_startFruit.scale=0,ui_startFruit.alpha=0,ui_startFruit.ca=e,ui_startFruit.Jt="middle",TweenLite.At(ui_startFruit,1,{scale:1,alpha:1,It:Back.Ft});var a=document.getElementsByClassName("wrapper")[0],i=document.getElementsByClassName("wrapper-left")[0],s=document.getElementsByClassName("wrapper-right")[0],o=document.getElementsByClassName("regular-background")[0],r=document.querySelector(".wrapper .sliding-background"),m=document.querySelector(".wrapper-left .sliding-background"),u=document.querySelector(".wrapper-right .sliding-background"),d=document.querySelector(".wrapper .sliding-parallax"),l=document.querySelector(".wrapper .sliding-parallax2"),g=document.querySelector(".wrapper-left .sliding-parallax"),c=document.querySelector(".wrapper-right .sliding-parallax"),h=document.querySelector(".wrapper-left .sliding-parallax2"),w=document.querySelector(".wrapper-right .sliding-parallax2");r.className="sliding-background hidden",m.className="sliding-background hidden",u.className="sliding-background hidden",d.className="sliding-parallax hidden",g.className="sliding-parallax hidden",c.className="sliding-parallax hidden",l.className="sliding-parallax2 hidden",h.className="sliding-parallax2 hidden",w.className="sliding-parallax2 hidden",a.className="wrapper",i.className="wrapper-left",s.className="wrapper-right",o.className="regular-background"},hideStartGameUI=function(){if(ui_startFruit.removeEventListener("dead",n),currentlyPlaying=createjs.Ht.play("ankYou"),e&&e.removeEventListener("dead",M),TweenLite.At(ui_newGame,.8,{scale:8,alpha:0,Et:function(){ui_newGame.Wt=0}}),multiplayer){var t=document.getElementsByClassName("wrapper-left")[0],a=document.getElementsByClassName("wrapper-right")[0],i=document.querySelector(".wrapper-left .sliding-background"),s=document.querySelector(".wrapper-right .sliding-background"),o=document.querySelector(".wrapper-left .sliding-parallax"),r=document.querySelector(".wrapper-right .sliding-parallax"),m=document.querySelector(".wrapper-left .sliding-parallax2"),u=document.querySelector(".wrapper-right .sliding-parallax2");i.className="sliding-background",o.className="sliding-parallax",m.className="sliding-parallax2",isAutomationLeft&&(t.className="wrapper-left frenzy"),s.className="sliding-background",r.className="sliding-parallax",u.className="sliding-parallax2",isAutomationRight&&(a.className="wrapper-right frenzy")}else{var d=document.getElementsByClassName("wrapper")[0],l=document.getElementsByClassName("sliding-background")[0],g=document.getElementsByClassName("sliding-parallax")[0],c=document.getElementsByClassName("sliding-parallax2")[0];l.className="sliding-background",g.className="sliding-parallax",c.className="sliding-parallax2",isAutomation&&(d.className="wrapper frenzy")}document.getElementsByClassName("regular-background")[0].className="regular-background hidden"},showScoreTextUI=function(t,a){if(gameState==GAME_READY)return e&&(bottomContext.fillStyle="yellow",bottomContext.font="36px 'Arial'",bottomContext.fillText("- Swipe to replay -",630,650)),void(bottomContext.fillStyle="white");t.font="italic 36px 'Arial'",t.fillText(a,.2*ui_hud.Dt.width,gameHeight-80),t.setTransform(1,0,0,1,0,0),-1!==t.canvas.id.indexOf("left")?("left",gameLifeLeft<=1&&(updateHudLeft+=1/8,Math.floor(updateHudLeft)%2==0?ui_hudLeft.Dt=assetsManager.ti:ui_hudLeft.Dt=assetsManager.ai)):-1!==t.canvas.id.indexOf("right")?("right",gameLifeRight<=1&&(updateHudRight+=1/8,Math.floor(updateHudRight)%2==0?ui_hudRight.Dt=assetsManager.ti:ui_hudRight.Dt=assetsManager.ai)):("middle",gameLife<=1&&(updateHud+=1/8,Math.floor(updateHud)%2==0?(ui_hud.Dt=assetsManager.ti,ui_gameLife.alpha=1):(ui_hud.Dt=assetsManager.ai,ui_gameLife.alpha=.5)))},showScoreUI=function(){multiplayer?(ui_hudLeft=particleSystem.na(SPP.za),ui_hudLeft.ii=ui_hudLeft.si=0,ui_hudLeft.init(-30,gameHeight-105,1/0,assetsManager.ai,bottomLeftContext),ui_hudLeft.scale=.5,ui_scoreIconLeft=particleSystem.na(SPP.za),ui_scoreIconLeft.ii=ui_scoreIconLeft.si=0,ui_scoreIconLeft.init(10,gameHeight-75,1/0,assetsManager.J,bottomLeftContext),ui_scoreIconLeft.scale=.5,ui_gameLifeLeft=particleSystem.na(SPP.za),ui_gameLifeLeft.ii=1,ui_gameLifeLeft.si=0,ui_gameLifeLeft.scale=.5,ui_gameLifeLeft.init(165,bottomLeftContext.canvas.height-70,1/0,ui_gamelifeTextureLeft,bottomLeftContext),ui_hudRight=particleSystem.na(SPP.za),ui_hudRight.ii=ui_hudRight.si=0,ui_hudRight.init(-30,gameHeight-105,1/0,assetsManager.ai,bottomRightContext),ui_hudRight.scale=.5,ui_scoreIconRight=particleSystem.na(SPP.za),ui_scoreIconRight.ii=ui_scoreIconRight.si=0,ui_scoreIconRight.init(10,gameHeight-75,1/0,assetsManager.J,bottomRightContext),ui_scoreIconRight.scale=.5,ui_scoreIconRight=particleSystem.na(SPP.za),ui_scoreIconRight.ii=ui_scoreIconRight.si=0,ui_scoreIconRight.init(10,gameHeight-75,1/0,assetsManager.J,bottomRightContext),ui_scoreIconRight.scale=.5,ui_gameLifeRight=particleSystem.na(SPP.za),ui_gameLifeRight.ii=1,ui_gameLifeRight.si=0,ui_gameLifeRight.scale=.5,ui_gameLifeRight.init(165,bottomRightContext.canvas.height-70,1/0,ui_gamelifeTextureRight,bottomRightContext)):(ui_hud=particleSystem.na(SPP.za),ui_hud.ii=ui_hud.si=0,ui_hud.init(0,gameHeight-105,1/0,assetsManager.ai,bottomContext),ui_hud.scale=.5,ui_hudPower=particleSystem.na(SPP.za),ui_hudPower.ii=ui_hudPower.si=0,ui_hudPower.init(150,gameHeight-107,1/0,assetsManager.jt,bottomContext),ui_hudPower.scale=.5,ui_hudPowerActive=particleSystem.na(SPP.za),ui_hudPowerActive.ii=ui_hudPowerActive.si=0,ui_hudPowerActive.init(164,gameHeight-87,1/0,null,bottomContext),ui_hudPowerActive.scale=.5,ui_scoreIcon=particleSystem.na(SPP.za),ui_scoreIcon.ii=ui_scoreIcon.si=0,ui_scoreIcon.init(10,gameHeight-75,1/0,assetsManager.J,bottomContext),ui_scoreIcon.scale=.5,ui_gameLife=particleSystem.na(SPP.za),ui_gameLife.ii=1,ui_gameLife.si=0,ui_gameLife.scale=.5,ui_gameLife.init(165,gameHeight-70,1/0,ui_gamelifeTexture,bottomContext))},hideScoreUI=function(){void 0!=window.he&&(window.he.Wt=0),void 0!=window.oi&&(window.oi.Wt=0),void 0!=window.et&&(window.et.Wt=0),void 0!=window.Qe&&(window.Qe.Wt=0),void 0!=window.we&&(window.we.Wt=0),void 0!=window.ni&&(window.ni.Wt=0),void 0!=window.fe&&(window.fe.Wt=0),void 0!=window.ri&&(window.ri.Wt=0),void 0!=window.be&&(window.be.Wt=0)},showGameoverUI=function(){endTime=(new Date).getTime(),ui_gameOver=particleSystem.na(SPP.za),ui_gameOver.init(.5*gameWidth,.5*gameHeight,1/0,assetsManager.mi,topContext),ui_gameOver.scale=0,TweenLite.At(ui_gameOver,.8,{ui:2,scale:1.6,It:Back.di,Et:raiseGameOver}),enterScoreDelay(4),enterNameDelay(4),document.body.addEventListener("keydown",a,!0)},raiseGameOver=function(){TweenLite.At(ui_gameOver.position,.8,{ui:1,y:.15*gameHeight,It:Back.di,Et:g})},showGood=function(e=.5*gameWidth,t=.5*gameHeight){var a,i=Math.floor(9999999*Math.random()+1);i%5==0?a="nice":i%5==1?a="wow":i%5==2?a="excellent":i%5==3?a="zinman":i%5==4&&(a="boom"),good_ui=particleSystem.na(SPP.za),good_ui.init(e,t,1/0,assetsManager[a+"Image"],topContext),good_ui.scale=0,TweenLite.At(good_ui,.5,{scale:.2,It:Back.Ft,Et:()=>{TweenLite.At(good_ui,.5,{ui:0,scale:0,It:Back.li,Et:()=>{showingGood=!1}})}}),isLlamas||realSlowmo||(themeMusic.volume=.5),currentlyPlaying=createjs.Ht.play(a),setTimeout(()=>{isLlamas||realSlowmo||(themeMusic.volume=1)},1e3)};var a=async function(e){gameState===GAME_OVER&&handleName(e),13===e.keyCode&&gameState===GAME_OVER&&(showStartGameUI(),hideScoreUI(),TweenLite.At(ui_gameOver,.1,{scale:0,It:Back.li,Et:i}),await scoresController.gi(playerName,score),o(),document.body.removeEventListener("keydown",a,!0),playerName="")},i=function(){ui_gameOver.Wt=0,hideScoreUI(),slowMo=!1};hideGameoverUI=function(){}}();class W{constructor(){this.Ut=[],this.database=firebase.database(),this.ci=firebase.ci(),this.hi=firebase.oe().wi(),this.ci.pi({fi:!0})}kt(){const e=new Date,t=-3-e.getDay(),a=e.getTime();return new Date(a+24*t*60*60*1e3)}vi(){const e=this;this.bi&&(this.bi(),this.bi=null),this.bi=this.ci.Li("scores")._i("score","desc")._i("date","asc").Ci(10).yi(function(t){e.Mi(t.xi.map(e=>e.data()))})}Gt(e=null,t=null,a=10){const i=this,s=t;let o;e?o=e:(o=new Date).setDate(o.getDate()-7),this.bi&&(this.bi(),this.bi=null),this.bi=this.ci.Li("scores").Si("date",">=",o).Si("date",s?"<=":">=",s||o).yi(function(e){i.Mi(e.xi.map(e=>e.data()).sort((e,t)=>e.J>t.J?-1:1).slice(0,a))})}Pi(e,t){return t.map(function(t){return e[t]})}ei(){return gameState==GAME_READY&&enterScores(scoresController.Ut.slice(0,5)),scoresController.Ut.slice(0,5)}Ri(e=null,t=null,a=10){const i=this,s=t;let o;e?o=e:(o=new Date).setDate(o.getDate()-7),this.ci.Li("scores").Si("date",">=",o).Si("date",s?"<=":">=",s||o).get().then(function(e){i.Mi(e.xi.map(e=>e.data()).sort((e,t)=>e.J>t.J?-1:1).slice(0,a)),i.ei()})}Ti(){const e=this;this.ci.Li("scores")._i("score","desc")._i("date","asc").Ci(10).get().then(function(t){e.Mi(t.xi.map(e=>e.data())),e.ei()})}Mi(e){this.Ut=e,clearScores(),this.ei()}async gi(e,t){const a=new Date,i=this.hi,s=await this.Hi(e);this.ci.Li("scores").add({username:e,J:t,Gi:a,ki:s}).then(function(e){Webcam.Ai(function(t){i.Fi(`score_image/${e.id}.png`).Ii(t,"data_url").then(function(e){})})}).catch(function(e){console.error("Error writing document: ",e)})}async Hi(e){const t=new Date;try{return(await this.ci.Li("stats").add({username:e,Ei:G(),Gi:t})).id}catch(e){console.error("Error writing document: ",e)}}}function O(e,t){supportsWebGL()?(gl=getWebGLContext(t),createProgramFromURIs(gl,{Wi:"shaders/simple.vs",Oi:"shaders/depth.fs",Et:function(a){!function(a){gl.useProgram(a);var i=gl.getUniformLocation(a,"width"),s=gl.getUniformLocation(a,"height"),o=gl.getUniformLocation(a,"sampler0"),n=gl.getAttribLocation(a,"position"),r=gl.getUniformLocation(a,"mirror"),m=gl.createBuffer(),u=gl.createTexture();gl.uniform1f(r,A.Ua?1:0),gl.uniform1f(i,t.width),gl.uniform1f(s,t.height),gl.uniform1i(o,0),gl.bindBuffer(gl.ARRAY_BUFFER,m),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),gl.STATIC_DRAW),gl.enableVertexAttribArray(n),gl.vertexAttribPointer(n,2,gl.FLOAT,!1,0,0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,u),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.bindTexture(gl.TEXTURE_2D,null),window.requestAnimationFrame(function a(){gl.uniform1f(r,A.Ua?1:0),gl.uniform1f(i,t.width),gl.uniform1f(s,t.height),gl.viewport(0,0,t.width,t.height),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,u),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,e),gl.drawArrays(gl.TRIANGLES,0,6),gl.bindTexture(gl.TEXTURE_2D,null),window.requestAnimationFrame(a)})}(a)}})):console.log("no WebGL")}